<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><%- book.title %></title>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.8.2/js/all.min.js"></script>
    <% lib.forEach(function(item){ %>
    <script src='<%= item %>'></script>
    <% }) %>

    <link rel="stylesheet" href="/css/archive/button.css">

    <script>var app = angular.module('cleeFanfic',['ngCookies']);</script>
    <script src="/view/cont/feedback_con.js"></script>
    <script src="/view/cont/feedbackService.js"></script>

    <script src="/view/modules/errorBox.js"></script>
    <script src="/view/modules/commentList.js"></script>
</head>
<style>
    *{padding:0;margin:0}body{font-family:SimSun,"Microsoft YaHei UI",serif;display:flex;flex-direction:column;color:rgba(108,95,93,255)}button{margin-right:3px;margin-left:auto;padding:10px;padding-top:3px;padding-bottom:3px;font-size:.9rem;font-weight:700;color:rgba(108,95,93,255)}a{color:rgba(109,100,136,1);text-decoration:underline;font-family:'Microsoft YaHei UI',serif}a:hover{color:rgba(184,173,217,1)}.fadeLink{color:rgba(109,100,136,1);text-decoration:underline;font-family:'Microsoft YaHei UI',serif;font-weight:700;userSelect:none;webkitUserSelect:none;msUserSelect:none;mozeUserSelect:none;cursor:pointer}.fadeLink:hover{color:rgba(184,173,217,1)}.emphasize{font-weight:700}#main{display:flex;flex-direction:column;padding:2rem;padding-left:1rem;padding-right:1rem;padding-bottom:0;min-width:100vw;margin-top:3.5rem;flex:1}h1{margin-left:auto;margin-right:auto;margin-bottom:24px;display:flex;flex-direction:column;font-size:36px;line-height:2.5rem}h2{color:rgba(128,128,128,255);display:flex;flex-direction:column;width:100%;font-size:28px;font-weight:400}h2 a{font-weight:700}h2>span{display:flex;flex-direction:row;flex-wrap:nowrap;width:auto;margin-left:auto;margin-right:auto}h2>span:nth-child(1){margin-left:auto}h2>span:last-child{margin-right:auto}h2>span>span{margin-left:2px}.grade{display:inline-block;width:auto;border-radius:15px;padding-left:10px;padding-right:10px;margin-left:auto;margin-right:auto;font-size:28px;color:#fff;font-family:"Microsoft YaHei UI",serif;font-weight:700;background:rgba(182,161,147,255);line-height:2rem;margin-bottom:12px}#guideBar{min-height:4rem;height:4rem;position:fixed;width:100%;background:rgba(158,142,166,255);display:flex;flex-direction:row}#guideBar>div{background:rgba(0,0,0,0);color:#fff;font-size:32px;letter-spacing:12px;font-weight:700;font-family:"Microsoft JhengHei UI",serif;padding:0;margin:0;padding-left:8px;padding-right:8px;height:100%;line-height:4rem;width:auto}#guideBar>div:nth-child(odd){display:block}#guideBar>div:nth-child(even){display:none;font-size:14px;margin-left:auto;margin-right:auto;margin-left:-3px}#guideBar>div:first-child{margin-right:auto;margin-left:0}#guideBar>div:nth-last-child(2){margin-left:auto;margin-right:0}#guideBar a{color:#fff;text-decoration:none}#guideBar a:hover{background:rgba(119,111,144,255);text-decoration:underline}#guideBar a:disabled{color:gray}.miniInfo:nth-child(odd):nth-child(1){margin-left:auto}.miniInfo:nth-child(odd):last-child{margin-right:auto}.chapterJumberH{min-width:4rem}.scrollFunc{display:flex;flex-direction:column}.scrollButton{margin-left:auto;margin-right:15px;font-size:28px;color:rgba(158,142,166,255)}.scrollButton:hover{color:rgba(119,111,144,255)}.scrollButton:nth-child(odd){display:none}.scrollButton:nth-child(even){display:block}#contents{font-size:24px}#infoScroll{min-height:5rem;height:calc(100% - 5rem);width:100%;position:fixed;top:4rem;padding-top:10px}#indexInfo{margin-top:2rem;font-size:32px;display:flex;flex-direction:row;flex-wrap:wrap;margin-left:auto;margin-right:auto;overflow-y:auto;width:calc(100% - 10rem)}#indexInfo>div{font-size:inherit;display:flex;flex-direction:row;width:50%;min-width:50%;margin-top:10px;margin-bottom:10px}#indexInfo a{font-size:inherit;color:inherit;text-decoration:none;display:flex;flex-direction:row}#indexInfo a:hover{color:inherit;text-decoration:underline}#infoScroll>div{overflow:auto}#infoScroll{background:#fff;border-right:1px solid rgba(205,205,205,255);box-shadow:5px 0 5px rgba(215,215,215,115);position:fixed}.paragraph{text-indent:2rem;margin-bottom:2rem;letter-spacing:1px;margin-left:1.5rem;margin-right:1.5rem}.infoPanel{display:flex;flex-direction:column}#tagInfo{border:1px solid rgba(205,205,205,255);box-shadow:0 0 8px rgba(215,215,215,188);display:flex;font-size:32px;margin-left:auto;margin-right:auto;margin-bottom:2rem;width:80%}#tagInfo>div{flex:1;margin:20px;margin-top:15px;margin-bottom:15px;display:flex;flex-direction:column}#tagInfo a{border-radius:5px;line-height:1.2rem;padding:1px;padding-left:4px;padding-right:4px;margin-right:4px;color:rgba(181,163,160,255);border:1px solid rgba(181,163,160,255);text-decoration:none}#tagInfo a:hover{background:rgba(181,163,160,255);color:#fff}#tagInfo>div>div{margin-top:3px;margin-bottom:3px;padding-top:2px;padding-bottom:2px}.infoPanel>div:not(:last-child){margin-top:1rem;margin-left:2rem}.infoDash{border-top:solid 1px rgba(181,163,160,255);height:2px;min-height:2px;width:82%;margin-top:1rem;margin-left:auto;margin-right:auto}.infoPanel>div:nth-child(1){border-left:solid 8px rgba(158,142,166,255);padding-left:.6rem;margin-bottom:0;font-weight:700;margin-left:0}.infoEmphasize{border-left:solid 8px rgba(158,142,166,255);padding-left:.6rem;margin-bottom:0;font-weight:700;margin-left:0}.requestForm{margin:auto;margin-top:0;display:flex;flex-direction:column;padding-bottom:8rem}.requestForm>div{display:flex;flex-direction:row}.warning{margin-left:auto;width:80%;margin-right:auto;display:flex;flex-direction:column;color:rgba(128,128,128,255);font-size:32px}.warning li{margin-bottom:4px}.notes{margin-left:auto;margin-right:auto;width:80%;color:rgba(128,128,128,255)}.end{margin-left:auto;margin-right:auto;font-weight:700;font-size:42px;margin-top:2rem;margin-bottom:2rem;color:rgba(128,128,128,255)}#bookInfo{margin-left:auto;margin-right:auto;font-size:28px;width:50%;display:flex;flex-direction:column}#bookInfo>div{display:flex;flex-direction:row}#bookInfo>div>span:nth-child(1){font-weight:700}#bookInfo>div>div{display:flex;flex-direction:row;margin-left:1rem}#feedbackRow{display:flex;flex-direction:row;padding-top:10px;min-height:1.5rem;height:1.5rem;max-height:1.5rem;min-width:35rem;margin-left:auto;margin-right:auto;margin-bottom:0;border-top:1px solid rgba(180,180,180,255)}#arrowRow{min-width:35rem;margin-left:auto;margin-right:auto;display:flex;flex-direction:row;padding:0;height:1.5rem;min-height:1.5rem;max-height:1.5rem;overflow:hidden}#arrowRow>div{margin-left:0;transition:transform 1s ease-in-out;transform:translateX(-100%)}.feedbackButton{border:none;background:0 0;margin-right:10px;margin-left:0;color:rgba(108,95,93,255);cursor:pointer}.likedButton{color:#8b0000;font-weight:700;background:0 0;cursor:pointer;border:none;margin-left:15px}.likedButton:hover{color:#ff4500}.feedbackButton:hover{color:rgba(190,150,124,1)}.feedbackButton:disabled{color:rgba(190,150,124,1)}#feedbackRow button:first-child{margin-left:auto}#feedback{box-shadow:0 0 8px rgba(215,215,215,188) inset;background:rgba(240,240,240,.3);pointer-events:none;width:100%;display:flex;flex-direction:column;flex:1}.feedback-content{width:75%;margin-left:auto;margin-right:auto;pointer-events:auto;max-width:48rem;height:auto}.feedback-content>div{padding-left:40px;min-height:2rem;border-bottom:1px solid rgba(205,205,205,255);margin-left:0;display:flex;flex-direction:column}.feedback-content>div>div{margin-top:auto;margin-bottom:auto;display:inline-block}.feedback-content>div:last-child{border-bottom:none}.feedbackEntry a{margin-right:10px;text-decoration:none;color:rgba(158,142,166,255);font-weight:700}.feedbackEntry a:hover{margin-right:10px;text-decoration:none;color:rgba(139,100,127,255)}.pageIndex{display:flex;flex-direction:row;min-height:2rem;height:2rem;width:100%;margin-bottom:2rem}.pageIndex>div:first-child{margin-left:auto}.pageIndex>div:last-child{margin-right:auto}@media screen and (min-device-width:80rem){body{font-size:14px;min-height:100vh}#main{padding-left:4rem;padding-right:4rem;min-width:30rem;font-size:14px;margin-top:0}h1{font-size:20px;margin-bottom:12px;display:flex;flex-direction:row}h2{flex-direction:row;font-size:14px}h2>span{margin-left:8px;margin-right:8px}.grade{font-size:14px;margin-right:2rem;height:1.5rem;line-height:1.5rem;margin-top:auto;margin-bottom:auto}#tagInfo{font-size:14px}.warning{font-size:14px}#guideBar{height:100%;min-width:2.5rem;width:2.5rem;position:fixed;display:flex;flex-direction:column;overflow:hidden}#guideBar i{font-size:26px}#guideBar>div{width:100%;height:auto}#guideBar>div:first-child{margin-left:0}#guideBar>div:last-child{margin-bottom:0;margin-top:auto}#guideBar>div:nth-child(2){margin-top:0;margin-bottom:2rem}#guideBar>div:nth-child(odd){display:none}#guideBar>div:nth-child(even){display:block}#guideBar .miniInfo:nth-child(even):last-child{margin-bottom:auto}#guideBar .miniInfo:hover{background:rgba(119,111,144,255)!important}#guideBar .ss-edit{background:rgba(181,163,160,255)}#guideBar .ss-edit:hover{background:rgba(160,140,137,255)!important}#guideBar a{font-size:26px;color:inherit;background:inherit}#guideBar a:hover{text-decoration:none;background:rgba(0,0,0,0)}#guideBar .fas{color:inherit}.chapterJumper{min-height:4rem}.chapter{font-size:28px}#infoScroll{height:100vh;min-width:15rem;width:15rem;top:0;left:2.5rem}.scrollButton:nth-child(odd){display:block}.scrollButton:nth-child(even){display:none}.paragraph{line-height:1.7rem;letter-spacing:1px;margin-bottom:1.1rem;margin-left:1.5rem;margin-right:1.5rem}#contents{font-size:14px}#indexInfo{width:calc(100% - 2rem);margin-left:2rem;font-size:14px;display:flex;flex-direction:column}#indexInfo>div{width:100%;font-size:14px}#bookInfo{width:calc(100% - 1rem);margin-left:15px}#bookInfo>div{margin-top:15px;padding-bottom:12px;border-bottom:solid 1px rgba(235,235,235,148);font-size:14px;width:100%;display:flex;flex-direction:row;text-overflow:ellipsis;word-break:break-all;overflow:hidden}#bookInfo>div>span:nth-child(1){font-weight:700;width:auto}#bookInfo .timeInfo{display:flex;flex-direction:column}#bookInfo>div>div{display:flex;flex-direction:column}.end{font-size:24px}#feedback{margin-top:-3.6rem;margin-left:-4rem;width:calc(100% + 8rem);flex:1;padding-left:4rem;display:inline-block}}
</style>

<body ng-app="cleeFanfic" ng-controller="feedbackCon">
<info-receiver
        ng-init="workId= '<%= book._id %>';
                 chapterId='<%= chapter._id %>';
                 liked='<%= book.liked %>';
                 visitorLiked = '<%= book.visitorLiked %>';
                 bookStatus = '<%= book.status %>';
                 bookMarked = '<%= book.bookmarked %>';
                 chapterCount = '<%= book.chapterCount %>';
                 index = '<%= JSON.stringify(index) %>';
                 authorId = '<%= book.user %>';
                 readerId = '<%= readerId %>';
                 visitorId = '<%= visitorId %>';
                 chapterCommented = '<%= chapter.comments %>';
                 commented = '<%= book.comments %>';
                 bookCommentList = '<%= JSON.stringify(bookComment) %>';
                 chapterCommentList = '<%= JSON.stringify(chapterComment) %>';
                 likePostList = '<%= JSON.stringify(likeList) %>';
                 feedback = '<%= JSON.stringify(book.feedback) %>';">
</info-receiver>
<div style="width:100%;position:fixed;top:0;min-height:2.5rem;display:flex;flex-direction:row;">
    <div class="error-box">

    </div>
</div>
<div id="guideBar">
    <div class="chapterJumberH"><a href="{{nextChapter(true)}}" ng-show="nextExist(true)">上一章</a></div>
    <div class="chapterJumper" ><a href="{{nextChapter(true)}}" ng-show="nextExist(true)"><i class="chapter fas fa-arrow-left"></i></a></div>

    <div class="miniInfo" ng-click="showBook()">作品</div>
    <div class="miniInfo" id="bookButton" ng-click="showBook()"><i class="fas fa-book fa-2x"></i></div>

    <% if(index.length>=1 && book.status == 1) { %>
    <div  class="miniInfo" ng-click="showIndex()">目录</div>
    <div  class="miniInfo" id="indexButton" ng-click="showIndex()"><i class="fas fa-list fa-2x"></i></div>
    <% } %>

    <% if(user._id == readerId && book.published){ %>
    <div class="ss-edit"><a href="<%- '/fanfic/post/edit?id='+chapter.indexId %>" target="_blank">编辑</a></div>
    <div class="ss-edit"><a href="<%- '/fanfic/post/edit?id='+chapter.indexId %>" target="_blank"><i class="fas fa-edit"></i></a></div>
    <% } %>

    <% if(user._id == readerId && book.published){ %>
    <div  class="ss-edit" ng-click="deleteItem()">删除</div>
    <div  class="ss-edit" ng-click="deleteItem()"><i class="fas fa-trash fa-2x"></i></div>
    <% } %>

    <div class="chapterJumberH"><a href="{{nextChapter(false)}}" ng-show="nextExist(false)">下一章</a></div>
    <div class="chapterJumper"><a href="{{nextChapter(false)}}" ng-show="nextExist(false)"><i class="chapter fas fa-arrow-right"></i></a></div>
</div>

<div id="infoScroll" ng-show="panelVisible" style="display:none;">
    <div style="display:flex;flex-direction:row;" class="scrollFunc">
        <div class="scrollButton" ng-click="closeInfoPanel()"><i class="fas fa-arrow-alt-circle-left"></i></div>
        <div class="scrollButton fadeLink" style="margin-top:1rem;font-size:32px;" ng-click="closeInfoPanel()">收起 ↑</div>
    </div>

<!--    书籍信息界面-->
    <div id="bookInfo" ng-show="bookVisible">
        <div style="margin-top:2rem;"><span>作品名：</span><span><%- book.title %></span></div>
        <% let calcWord = function(wordNum){ %>
        <% let wordShow = wordNum+' 字'; %>
        <% if(wordNum > 999 && wordNum <= 9999){ %>
        <% wordShow = (wordNum/1000).toFixed(2)+' 千字'; %>
        <% } else if(wordNum > 9999){ %>
        <% wordShow = (wordNum/10000).toFixed(2)+' 万字';} %>
        <% return wordShow; %>
        <% } %>
        <div><span>总字数：</span><span><%- calcWord(book.wordCount) %></span></div>
        <div><span>章节数：</span><span><%- book.chapterCount + '章' %></span></div>
        <div class="timeInfo">
            <span>发布于：</span>
            <div>
                <% let publishTime= new Date(book.updated) %>
                <div><%- publishTime.getFullYear() %>年<%- publishTime.getMonth() %>月<%- publishTime.getDate() %>日</div>
                <div><%- publishTime.getHours() %>时<%- publishTime.getMinutes() %>分<%- publishTime.getSeconds() %>秒</div>
            </div>
        </div>
        <div class="timeInfo">
            <span>更新于：</span>
            <div>
                <% publishTime= new Date(book.updated) %>
                <div><%- publishTime.getFullYear() %>年<%- publishTime.getMonth() %>月<%- publishTime.getDate() %>日</div>
                <div><%- publishTime.getHours() %>时<%- publishTime.getMinutes() %>分<%- publishTime.getSeconds() %>秒</div>
            </div>
        </div>
    </div>

<!--    目录界面-->
    <div id="indexInfo" ng-show="indexVisible">
        <% var chapterCount = function(num){ %>
        <% if(num ==0 ) { %>
        <%       return '首章'; %>
        <% } else { %>
        <%      return '第' + num +'章'; }%>
        <% }%>

        <% for (let i=0; i< index.length;++i) {%>
        <% if(index[i]._id == chapter.indexId){ %>
        <div style="font-weight:bold;color:gray;" >
            <div><%- chapterCount(index[i].order) %></div>
            <div style="margin-left:5px;flex:1;text-overflow: ellipsis;word-break: break-all;overflow:hidden;">
                     <span> <%- index[i].title %> </span>
            </div>
        </div>
        <% } else if(index[i].published){ %>
        <div> <a href="<%- '/fanfic/'+index[i].chapter %>">
            <div><%- chapterCount(index[i].order) %></div>
            <div style="margin-left:5px;flex:1;text-overflow: ellipsis;word-break: break-all;overflow:hidden;"><%- index[i].title %></div>
        </a></div>
        <% } }%>
    </div>
</div>

<div id="main">
    <h1 style="min-height:2.5rem;">
        <% if(chapter.grade <= 1){ %>
        <div class="grade"><%- fanfic_grade[chapter.grade].refer %></div>
        <% }else{ %>
        <div class="grade" style="background:rgba(251,161,0,255);"><%- fanfic_grade[chapter.grade].refer %></div>
        <% } %>
        <%- title %>
    </h1>
    <h2>
       <span>
            <span>作者：</span><a href="<%- '/users/'+user._id %>" target="_blank"><%- user.user %></a>
        </span>
        <% if(index.length >1 || book.status == 1) {%>
        <span>
            <span>属于作品：</span>
            <div class='fadeLink' ng-click="showBook()"><%- book.title %></div>
        </span>
        <% } %>
        <span>
            <span>总字数：</span>
            <span><%- calcWord(chapter.wordCount) %></span>
        </span>
        <span>
            <span>点赞数：</span>
            <span><span class="preLoad1"><%- book.liked %></span></span><span class="afterLoad1" style="display:none;">{{liked}}</span></span>
        </span>
        <span>
            <span>被收藏：</span>
            <span><%- book.bookmarked %></span>
        </span>
        <span>
            <span>阅读量：</span>
            <span><%- chapter.visited %></span>
        </span>
        <span>
            <span>更新于:</span>
            <% let updateTime= new Date(chapter.date) %>
            <span><%- updateTime.getFullYear() %>年<%- updateTime.getMonth()+1 %>月<%- updateTime.getDate() %>日</span>
            <span><%- updateTime.getHours() %>时<%- updateTime.getMinutes() %>分<%- updateTime.getSeconds() %>秒</span>
        </span>
    </h2>
    <% if(chapter.notes!='') {%>
       <div class="notes">
           <div class="emphasize infoEmphasize" style="margin-bottom:0.5rem;">作者的话：</div>
           <div style="margin-left:2rem;">
               <%- chapter.notes %>
           </div>
       </div>
    <% } %>
    <div style="margin-bottom:4rem;"></div>

    <% if(chapter.passcode.use && !codeMatch) {%>
    <div style="display:flex;flex:1;min-height:calc(100% - 20rem);flex-direction:column;margin-left:auto;margin-right:auto;">
        <div style="margin-top:auto;margin-bottom:10px;">本文作者决定不向公众公开该作品，该文章仅做个人存档之用。</div>
        <form class="requestForm">
            <div style="margin-top:3rem;">
                <div style="font-weight:bold;">分享口令：</div>
                <div style="display:flex;flex-direction:row;">
                    <input style="flex:1;" class="code-input" type="text" autocapitalize="off" autocorrect="off" placeholder="请输入口令">
                    <div id="checkingPassword" style="color:rgba(251,161,0,255);flex-direction:row;" ng-show="validating"><img src="/img/loading.gif" style="width:22px;height:22px;"> <span>密码验证中，请稍后</span></div>
                </div>
            </div>
            <div style="color:darkred;margin-left:auto;margin-right:auto;margin-bottom:0;margin-top:15px;font-weight:bold;">{{validateError}}</div>
            <div style="margin-top:2rem;">
                <button id="submitBtn" type="button" style="margin-right:-5rem;margin-left:auto;" ng-click="submitCode()">提交</button>
            </div>
        </form>


        <div style="color:rgba(251,161,0,255);margin-left:auto;margin-right:auto;margin-bottom:100px;"> {{codeError}}</div>
    </div>
    <% } else { %>
    <div id="tagInfo">
        <div>
            <div>
                <span>基于作品：</span>
                <% for(let i=0;i < chapter.fandom.length;++i){ %>
                <a href="<%- '/search/tag?id='+ escape(chapter.fandom[i]) %>" target="_blank"><%- chapter.fandom[i] %></a>
                <% } %>
            </div>
            <div>
                <span>登场角色：</span>
                <% for(let i=0;i < chapter.characters.length;++i){ %>
                <a href="<%- '/search/tag?id='+ escape(chapter.characters[i]) %>" target="_blank"><%- chapter.characters[i] %></a>
                <% } %>
            </div>
            <div>
                <span>人物关系：</span>
                <% for(let i=0;i < chapter.relationships.length;++i){ %>
                <a href="<%- '/search/tag?id='+ escape(chapter.relationships[i]) %>" target="_blank"><%- chapter.relationships[i] %></a>
                <% } %>
            </div>
            <div>
                <span>其他标签：</span>
                <% for(let i=0;i < chapter.tag.length;++i){ %>
                <a href="<%- '/search/tag?id='+ escape(chapter.tag[i]) %>" target="_blank"><%- chapter.tag[i] %></a>
                <% }; %>
            </div>
        </div>
    </div>
    <div id="warningPanel" class="warning infoPanel">
        <div class="emphasize infoEmphasize" style="margin-left:0;">作者警告:</div>
        <% if(chapter.warning.length >0) {%>
        <div>
            <ul>
                <% chapter.warning.forEach(function(item){%>
                <li><%= item %></li>
                <% }) %>
            </ul>
        </div>
        <% } else {%>
               <div>作者选择不使用文前警告</div>
        <% } %>
        <div style="margin-top:2rem;"></div>
    </div>
    <div class="infoDash"></div>
    <div style="margin-top:2rem;"></div>

    <div id="contents" style="flex:1;min-width:28rem;width:90%;margin-left:auto;margin-right:auto;">
        <%- chapter.contents %>
    </div>

    <div style="margin-bottom:2rem;"></div>
    <div class="end" style="padding-bottom:2rem;" ng-show="isEnd()">{{"· 全文完 · " | endClass:bookStatus}}</div>
    <% } %>
    <div id="feedbackRow">
        <button id="likeCommentBtn" ng-click="showLikeList()" class="feedbackButton" ng-disabled="infoType == 2" ng-if="liked+bookMarked>0"><span>热度</span>({{liked+bookMarked}})</button>
        <% if(user._id != readerId){ %>
        <button ng-click="likeIt()" ng-class="{'feedbackButton':!ifLiked,'likedButton':ifLiked}"><span ng-show="ifLiked">已点赞</span><span ng-show="!ifLiked">点赞</span>({{liked}})</button>
        <button ng-click="bookMarkIt()" ng-class="{'feedbackButton':!ifBookMarked,'likedButton':ifBookMarked}"><span ng-show="ifBookMarked">已收藏</span><span ng-show="!ifBookMarked">收藏</span>({{bookMarked}})</button>
        <% } %>
        <button id="chapterCommentBtn" ng-click="showChapterComment()" class="feedbackButton" ng-disabled="infoType ==1"><span>评论</span><span>({{chapterCommented}})</span></button>
        <button id="bookCommentBtn" ng-click="showBookComment()" class="feedbackButton" ng-disabled="infoType===0"><span>作品评论</span><span>({{commented}})</span></button>
    </div>
    <div id="arrowRow">
        <div id="btnPointer"><i class="fa fa-angle-up fa-2x"></i></div>
    </div>
    <div id="feedback">
        <div style="min-height:4.5rem;"></div>
        <div class="feedback-content" ng-show="infoType < 2">
            <comment-info></comment-info>
        </div>
        <div class="feedback-content" ng-show="infoType == 2">
            <div class="feedbackEntry" ng-show="visitorLiked >0" style="border-bottom:none;">
                <div>共有<b style="margin-left:5px;margin-right:5px;">{{visitorLiked}}</b>名游客点赞了该作品</div>
            </div>
            <div style="min-height:15px;" ng-show="likePostList.length>0"></div>
            <div ng-repeat="feedback in likePostList">
                <div class="feedbackEntry"><a href="{{'/users/'+feedback.user}}" target="_blank">{{feedback.userName}}</a> <span ng-if="feedback.type==1">点赞了</span><span ng-if="feedback.type==2">收藏了</span>此作品</div>
            </div>
        </div>
        <div class="clear" style="min-height:2rem;width:100%;clear:both;"></div>
    </div>
</div>
</body>
</html>