<script src="../../data/schema/cleeArchive_userValidate.js"></script>
<svg aria-hidden="true" style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
        <symbol id="icon-user" viewBox="0 0 24 32">
            <title>user</title>
            <path d="M12 16c-6.625 0-12 5.375-12 12 0 2.211 1.789 4 4 4h16c2.211 0 4-1.789 4-4 0-6.625-5.375-12-12-12zM6 6c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6s-6-2.686-6-6z"></path>
        </symbol>
        <symbol id="icon-users" viewBox="0 0 36 32">
            <title>users</title>
            <path d="M24 24.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z"></path>
            <path d="M10.225 24.854c1.728-1.13 3.877-1.989 6.243-2.513-0.47-0.556-0.897-1.176-1.265-1.844-0.95-1.726-1.453-3.627-1.453-5.497 0-2.689 0-5.228 0.956-7.305 0.928-2.016 2.598-3.265 4.976-3.734-0.529-2.39-1.936-3.961-5.682-3.961-6 0-6 4.029-6 9 0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h8.719c0.454-0.403 0.956-0.787 1.506-1.146z"></path>
        </symbol>
        <symbol id="icon-price-tags" viewBox="0 0 40 32">
            <title>price-tags</title>
            <path d="M38.5 0h-12c-0.825 0-1.977 0.477-2.561 1.061l-14.879 14.879c-0.583 0.583-0.583 1.538 0 2.121l12.879 12.879c0.583 0.583 1.538 0.583 2.121 0l14.879-14.879c0.583-0.583 1.061-1.736 1.061-2.561v-12c0-0.825-0.675-1.5-1.5-1.5zM31 12c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"></path>
            <path d="M4 17l17-17h-2.5c-0.825 0-1.977 0.477-2.561 1.061l-14.879 14.879c-0.583 0.583-0.583 1.538 0 2.121l12.879 12.879c0.583 0.583 1.538 0.583 2.121 0l0.939-0.939-13-13z"></path>
        </symbol>
        <symbol id="icon-book" viewBox="0 0 32 32">
            <title>book</title>
            <path d="M28 4v26h-21c-1.657 0-3-1.343-3-3s1.343-3 3-3h19v-24h-20c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24v-28h-2z"></path>
            <path d="M7.002 26v0c-0.001 0-0.001 0-0.002 0-0.552 0-1 0.448-1 1s0.448 1 1 1c0.001 0 0.001-0 0.002-0v0h18.997v-2h-18.997z"></path>
        </symbol>
        <symbol id="icon-menu_book" viewBox="0 0 24 24">
            <title>menu_book</title>
            <path d="M17.484 14.344q1.219 0 2.531 0.234v1.5q-0.938-0.234-2.531-0.234-2.813 0-4.5 0.984v-1.688q1.781-0.797 4.5-0.797zM12.984 12.469q1.969-0.797 4.5-0.797 1.219 0 2.531 0.234v1.5q-0.938-0.234-2.531-0.234-2.813 0-4.5 0.984v-1.688zM17.484 10.5q-2.813 0-4.5 0.984v-1.641q1.875-0.844 4.5-0.844 1.219 0 2.531 0.234v1.547q-1.125-0.281-2.531-0.281zM21 18.516v-11.531q-1.547-0.469-3.516-0.469-3.047 0-5.484 1.5v11.484q2.438-1.5 5.484-1.5 1.828 0 3.516 0.516zM17.484 4.5q3.563 0 5.531 1.5v14.578q0 0.188-0.164 0.352t-0.352 0.164q-0.141 0-0.234-0.047-1.922-1.031-4.781-1.031-3.047 0-5.484 1.5-2.016-1.5-5.484-1.5-2.531 0-4.781 1.078-0.047 0-0.117 0.023t-0.117 0.023q-0.188 0-0.352-0.141t-0.164-0.328v-14.672q2.016-1.5 5.531-1.5 3.469 0 5.484 1.5 2.016-1.5 5.484-1.5z"></path>
        </symbol>
        <symbol id="icon-priority_high" viewBox="0 0 24 24">
            <title>priority_high</title>
            <path d="M9.984 3h4.031v12h-4.031v-12zM9.984 18.984q0-0.844 0.586-1.406t1.43-0.563 1.43 0.563 0.586 1.406-0.586 1.43-1.43 0.586-1.43-0.586-0.586-1.43z"></path>
        </symbol>
        <symbol id="icon-caret-up" viewBox="0 0 16 28">
            <title>caret-up</title>
            <path d="M16 19c0 0.547-0.453 1-1 1h-14c-0.547 0-1-0.453-1-1 0-0.266 0.109-0.516 0.297-0.703l7-7c0.187-0.187 0.438-0.297 0.703-0.297s0.516 0.109 0.703 0.297l7 7c0.187 0.187 0.297 0.438 0.297 0.703z"></path>
        </symbol>
        <symbol id="icon-caret-down" viewBox="0 0 16 28">
            <title>caret-down</title>
            <path d="M16 11c0 0.266-0.109 0.516-0.297 0.703l-7 7c-0.187 0.187-0.438 0.297-0.703 0.297s-0.516-0.109-0.703-0.297l-7-7c-0.187-0.187-0.297-0.438-0.297-0.703 0-0.547 0.453-1 1-1h14c0.547 0 1 0.453 1 1z"></path>
        </symbol>
        <symbol id="icon-pencil" viewBox="0 0 32 32">
            <title>pencil</title>
            <path d="M30.173 7.542l-0.314 0.314-5.726-5.729 0.313-0.313c0 0 1.371-1.813 3.321-1.813 0.859 0 1.832 0.353 2.849 1.37 3.354 3.354-0.443 6.171-0.443 6.171zM27.979 9.737l-19.499 19.506-8.48 2.757 2.756-8.485v-0.003h0.002l19.496-19.505 0.252 0.253M2.76 29.239l4.237-1.219-2.894-3.082-1.343 4.301z"></path>
        </symbol>
        <symbol id="icon-more" viewBox="0 0 24 24">
            <title>more</title>
            <path d="M18.984 13.5q0.609 0 1.055-0.422t0.445-1.078-0.445-1.078-1.055-0.422-1.055 0.422-0.445 1.078 0.445 1.078 1.055 0.422zM14.016 13.5q0.609 0 1.055-0.422t0.445-1.078-0.445-1.078-1.055-0.422-1.055 0.422-0.445 1.078 0.445 1.078 1.055 0.422zM9 13.5q0.656 0 1.078-0.422t0.422-1.078-0.422-1.078-1.078-0.422-1.078 0.422-0.422 1.078 0.422 1.078 1.078 0.422zM21.984 3q0.797 0 1.406 0.609t0.609 1.406v13.969q0 0.797-0.609 1.406t-1.406 0.609h-14.906q-1.031 0-1.688-0.891l-5.391-8.109 5.391-8.109q0.656-0.891 1.594-0.891h15z"></path>
        </symbol>
        <symbol id="icon-hangouts" viewBox="0 0 32 32">
            <title>hangouts</title>
            <path d="M15.994 0c-7.631 0-13.819 6.188-13.819 13.819 0 7.231 6.588 13.094 13.819 13.094v5.087c8.394-4.256 13.831-11.113 13.831-18.181 0-7.631-6.2-13.819-13.831-13.819zM14 16c0 1.656-0.894 3-2 3v-3h-4v-6h6v6zM24 16c0 1.656-0.894 3-2 3v-3h-4v-6h6v6z"></path>
        </symbol>
        <symbol id="icon-bold" viewBox="0 0 32 32">
            <title>bold</title>
            <path d="M22.121 15.145c1.172-1.392 1.879-3.188 1.879-5.145 0-4.411-3.589-8-8-8h-10v28h12c4.411 0 8-3.589 8-8 0-2.905-1.556-5.453-3.879-6.855zM12 6h3.172c1.749 0 3.172 1.794 3.172 4s-1.423 4-3.172 4h-3.172v-8zM16.969 26h-4.969v-8h4.969c1.827 0 3.313 1.794 3.313 4s-1.486 4-3.313 4z"></path>
        </symbol>
        <symbol id="icon-italic" viewBox="0 0 32 32">
            <title>italic</title>
            <path d="M28 2v2h-4l-10 24h4v2h-14v-2h4l10-24h-4v-2z"></path>
        </symbol>
        <symbol id="icon-underline" viewBox="0 0 32 32">
            <title>underline</title>
            <path d="M22 2h4v13c0 4.971-4.477 9-10 9s-10-4.029-10-9v-13h4v13c0 1.255 0.57 2.459 1.605 3.391 1.153 1.038 2.714 1.609 4.395 1.609s3.242-0.572 4.395-1.609c1.035-0.931 1.605-2.136 1.605-3.391v-13zM6 26h20v4h-20z"></path>
        </symbol>
        <symbol id="icon-strikethrough" viewBox="0 0 32 32">
            <title>strikethrough</title>
            <path d="M32 16v2h-7.328c0.86 1.203 1.328 2.584 1.328 4 0 2.215-1.146 4.345-3.143 5.843-1.855 1.391-4.29 2.157-6.857 2.157s-5.002-0.766-6.857-2.157c-1.998-1.498-3.143-3.628-3.143-5.843h4c0 2.168 2.748 4 6 4s6-1.832 6-4c0-2.168-2.748-4-6-4h-16v-2h9.36c-0.073-0.052-0.146-0.104-0.217-0.157-1.998-1.498-3.143-3.628-3.143-5.843s1.146-4.345 3.143-5.843c1.855-1.391 4.29-2.157 6.857-2.157s5.002 0.766 6.857 2.157c1.997 1.498 3.143 3.628 3.143 5.843h-4c0-2.168-2.748-4-6-4s-6 1.832-6 4c0 2.168 2.748 4 6 4 2.468 0 4.814 0.709 6.64 2h9.36z"></path>
        </symbol>
        <symbol id="icon-link" viewBox="0 0 32 32">
            <title>link</title>
            <path d="M13.757 19.868c-0.416 0-0.832-0.159-1.149-0.476-2.973-2.973-2.973-7.81 0-10.783l6-6c1.44-1.44 3.355-2.233 5.392-2.233s3.951 0.793 5.392 2.233c2.973 2.973 2.973 7.81 0 10.783l-2.743 2.743c-0.635 0.635-1.663 0.635-2.298 0s-0.635-1.663 0-2.298l2.743-2.743c1.706-1.706 1.706-4.481 0-6.187-0.826-0.826-1.925-1.281-3.094-1.281s-2.267 0.455-3.094 1.281l-6 6c-1.706 1.706-1.706 4.481 0 6.187 0.635 0.635 0.635 1.663 0 2.298-0.317 0.317-0.733 0.476-1.149 0.476z"></path>
            <path d="M8 31.625c-2.037 0-3.952-0.793-5.392-2.233-2.973-2.973-2.973-7.81 0-10.783l2.743-2.743c0.635-0.635 1.664-0.635 2.298 0s0.635 1.663 0 2.298l-2.743 2.743c-1.706 1.706-1.706 4.481 0 6.187 0.826 0.826 1.925 1.281 3.094 1.281s2.267-0.455 3.094-1.281l6-6c1.706-1.706 1.706-4.481 0-6.187-0.635-0.635-0.635-1.663 0-2.298s1.663-0.635 2.298 0c2.973 2.973 2.973 7.81 0 10.783l-6 6c-1.44 1.44-3.355 2.233-5.392 2.233z"></path>
        </symbol>
        <symbol id="icon-image" viewBox="0 0 32 32">
            <title>image</title>
            <path d="M29.996 4c0.001 0.001 0.003 0.002 0.004 0.004v23.993c-0.001 0.001-0.002 0.003-0.004 0.004h-27.993c-0.001-0.001-0.003-0.002-0.004-0.004v-23.993c0.001-0.001 0.002-0.003 0.004-0.004h27.993zM30 2h-28c-1.1 0-2 0.9-2 2v24c0 1.1 0.9 2 2 2h28c1.1 0 2-0.9 2-2v-24c0-1.1-0.9-2-2-2v0z"></path>
            <path d="M26 9c0 1.657-1.343 3-3 3s-3-1.343-3-3 1.343-3 3-3 3 1.343 3 3z"></path>
            <path d="M28 26h-24v-4l7-12 8 10h2l7-6z"></path>
        </symbol>
        <symbol id="icon-list2" viewBox="0 0 32 32">
            <title>list2</title>
            <path d="M12 2h20v4h-20v-4zM12 14h20v4h-20v-4zM12 26h20v4h-20v-4zM0 4c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4zM0 16c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4zM0 28c0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.209-1.791 4-4 4s-4-1.791-4-4z"></path>
        </symbol>
        <symbol id="icon-list-numbered" viewBox="0 0 32 32">
            <title>list-numbered</title>
            <path d="M12 26h20v4h-20zM12 14h20v4h-20zM12 2h20v4h-20zM6 0v8h-2v-6h-2v-2zM4 16.438v1.563h4v2h-6v-4.563l4-1.875v-1.563h-4v-2h6v4.563zM8 22v10h-6v-2h4v-2h-4v-2h4v-2h-4v-2z"></path>
        </symbol>
    </defs>
</svg>
<div id="fanficEditor" style="height:auto;" ng-controller="editCon">
    <info-receiver
            ng-init="warningTemplate = <%=JSON.stringify(fanfic_warning)%>;
            gradeTemplate = <%= JSON.stringify(fanfic_grade) %>;
            workIndex = <%= JSON.stringify(chapters) %>;
            bookInfo = <%= JSON.stringify(book) %>;
            bookInfoDetail = <%= JSON.stringify(bookDetail) %>;
            currentIndex = <%= JSON.stringify(currentIndex) %>;
            userSettings = <%= JSON.stringify(user.settings) %>;">
    </info-receiver>

    <div ng-show="publishing" style="position:fixed;top:0;left:0;width:100vw;height:100vh;pointer-events:none;z-index:999;display:flex;">
        <div style="position:fixed;left:0;top:0;width:100%;height:100%;background:rgba(158,158,158,255);opacity:35%;"></div>
        <img src="/img/loading.gif" style="width:22px;height:22px;">
    </div>

    <!--    // 标题区域-->
    <div id="headerTitle" class="displayRow bold-font">
        <div></div>
        <div class="myInput displayRow">
            <div class="inputHint" ng-show="!bookInfo.title || bookInfo.title ==''" style="margin-left:5px;top:7px;font-size:16px;">文章标题(必填)</div>
            <input class="bold-font" style="outline:none;border:none;background:rgba(0,0,0,0);" ng-model="bookInfo.title">
        </div>
        <img src="/img/loading.gif" ng-show="bookSaving || chapterSaving" style="margin-left:5px;margin-right:5px;width:15px;height:15px;">
    </div>

    <!--    // 编辑区域-->
    <div id="editorDisplay" initialisation>
        <div style="width:28rem;display:flex;margin-left:auto;" ng-show="!contentsLoaded && requestingFanfic">
            <img src="/img/loading.gif" style="margin:auto;">
        </div>
        <div style="width:28rem;display:flex;margin-left:auto;" ng-show="contentsLoaded && error">
            <div  style="margin:auto;">
                {{error}}
            </div>
        </div>

        <!--    //右侧编辑栏-->
        <div id="rightEditBoard">
            <div expand-parent>
                <div style="display:flex;flex-direction:row;width:100%;font-size:14px;height:1.5rem;background:rgba(223,216,214,255);position:relative" float-parent>
                    <div class="panelTitle">文章信息</div>
                    <div class="infoIcon">
                        <div float-button><i class="fas fa-info-circle subIcon"></i></div>
                        <div float-page style="left:5px;top:32px;padding:10px;">
                            <p>通常您并不需要担心编辑界面上的作品信息，它会自动读取您首章的tag与相关设置作为作品的扉页。</p>
                            <p>因此在发布长篇连载时，建议在首章尽可能多地打上所有tag，以便只搜索作品扉页的读者们能够更好地阅读您的作品。</p>
                            <p>或者您也可以选择将首章作品保留为一个介绍文案，为您的作品做一个简单的介绍。</p>
                        </div>
                    </div>
                    <div class="expand-button"><i class="fas fa-chevron-down subIcon"></i></div>
                </div>

                <div expand-panel  id="workInfo">
                    <div class="displayRow"><div>连载状态</div>
                        <div style="margin-left:10px;display:flex;">
                            <select ng-model="bookInfo.status" style="margin-top:auto;margin-bottom:1px">
                                <option value="0">已完结</option>
                                <option value="1">连载中</option>
                            </select>
                        </div>
                    </div>
                    <div class="displayRow"><div>文章作者</div><div style="margin-left:10px;"><%= user.username %></div></div>
                    <div class="displayRow"><div>文章分级</div><div style="margin-left:10px;">{{bookInfoDetail.grade | grade:gradeTemplate}}</div></div>
                    <div style="display:flex;flex-direction:column;"><div style="width:auto;max-width:5rem;">文章简介</div>
                        <div style="margin-left:2rem;margin-top:4px;height:auto;line-height:1rem;">
                            {{bookInfoDetail.intro | textInfo}}
                        </div>
                    </div>
                    <div class="displayRow multipleRow"><div>基于作品</div><div ng-show="bookInfoDetail.fandom.length == 0">暂无tag</div><div ng-repeat="item in bookInfoDetail.fandom" style="margin-right:10px;">#{{item}}</div></div>
                    <div class="displayRow multipleRow"><div>人物关系</div><div ng-show="bookInfoDetail.relationships.length == 0">暂无tag</div><div ng-repeat="item in bookInfoDetail.relationships" style="margin-right:10px;">#{{item}}</div></div>
                    <div class="displayRow multipleRow"><div>登场角色</div><div ng-show="bookInfoDetail.characters.length == 0">暂无其他标签</div><div ng-repeat="item in bookInfoDetail.characters" style="margin-right:10px;">#{{item}}</div></div>
                    <div class="displayRow multipleRow"><div>其他标签</div>
                        <div ng-show="bookInfoDetail.tag.length == 0">暂无其他标签</div>
                        <div ng-repeat="item in bookInfoDetail.tag" style="margin-right:10px;">#{{item}}</div>
                    </div>
                    <div style="display:flex;flex-direction:column;"><div style="max-width:5rem;">文章警告</div>
                        <div ng-show="bookInfoDetail.warning.length==0">暂无警告</div>
                        <ul style="margin-left:2rem;" ng-show="bookInfoDetail.warning.length >0">
                            <li ng-repeat="item in bookInfoDetail.warning">{{item}}</li>
                        </ul>
                    </div>
                    <div class="displayRow"><div>总章节数</div><div>共计{{bookInfo.chapterCount}}章</div></div>
                    <div class="displayRow"><div>总字数</div><div>{{bookInfo.wordCount | wordCount}} 字</div></div>
                </div>
            </div>

            <div class="doubleLinear"></div>

            <div expand-parent>
                <div class="float-parent" float-parent>
                    <div class="panelTitle">章节编辑</div>
                    <div class="infoIcon">
                        <div float-button><i class="fas fa-info-circle subIcon"></i></div>
                        <div float-page style="left:5px;top:32px;padding:10px;">
                            <p>您可以在这里添加章节、删除章节，并调整章节顺序。</p>
                            <p>您可以在该说明中获取具体使用方法。</p>
                        </div>
                    </div>
                    <div class="expand-button"><i class="fas fa-chevron-down subIcon"></i></div>
                </div>

                <div style="background:rgba(223,216,214,255);min-height:20rem;margin-top:1rem;padding-top:1px;padding-bottom:1.5rem;" expand-panel>
                    <div id="workIndexPanel">
                        <div class="chapter-select displayRow"
                             ng-repeat="list in workIndex"
                             ng-click="selectChapter(list)"
                             style="padding-left:10px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;line-height:1.5rem;height:1.5rem;">
                            {{list.order | chapter}}  {{ list.chapter.title | chapterTitle}}
                        </div>
                        <div style="width:100%;height:100%;pointer-events:none;background:lightgray;opacity:0.8;position:absolute;top:0;left:0;display:flex;" ng-show="indexEditing">
                            <img src="/img/loading.gif" style="width:22px;height:22px;margin:auto;">
                        </div>
                    </div>
                    <div id="chapterEditorKeys" class="displayRow" style="margin-top:5px;">
                        <div><button ng-disabled="selectedChapters.length != 1 || indexEditing" ng-click="chapterSwap(-1)"><i class="fas fa-chevron-up"></i></button></div>
                        <div><button ng-disabled="selectedChapters.length != 1 || indexEditing" ng-click="chapterSwap(1)"><i class="fas fa-chevron-down"></i></button></div>
                        <div><button ng-disabled="selectedChapters.length > 1 || indexEditing" ng-click="addChapter()"><i class="fas fa-plus"></i></button></div>
                        <div><button ng-disabled="selectedChapters.length == 0" ng-click="removeChapter()"><i class="fas fa-trash"></i></button></div>
                    </div>
                </div>
            </div>

        </div>

        <div style="min-width:14px;width:14px;max-width:14px;padding-top:1rem;padding-bottom:3rem;flex:1;display:flex;">
            <div style="flex:1;border-right:solid 1px rgba(218,218,218,218);"></div>
        </div>

        <!--    // 左侧编辑栏-->
        <div style="min-width:28rem;">
            <div id="leftEditBoard" ng-show="contentsLoaded && !error">
                <!--  第一排-->
                <div class="displayRow myInput">
                    <div float-parent style="margin:0;margin-left:auto;margin-top:auto;padding:0;width:auto;" value="chapter.grade">
                        <div class="displayRow subIcon" float-select-button currentoption="{{gradeTemplate[chapter.grade].refer}}" currentvalue="{{chapter.grade}}" style="padding:0;height:20px;max-height:20px;">
                            <div class="optionName" style="margin-bottom:0;font-size:0.9rem;">全年龄向</div>
                            <div style="line-height:1rem;margin-top:-4px;margin-left:3px;"><i class="fa fa-caret-down" style="font-size:1.5rem;"></i></div>
                        </div>
                        <div float-page style="z-index:99;color:rgba(108,95,93,255);width:5rem;top:1.5rem;">
                            <div float-select ng-repeat="item in gradeTemplate" value="{{item.code}}">{{item.refer}}</div>
                        </div>
                    </div>
                </div>

                <div class="myInput displayRow" style="max-height:2rem;min-height:2rem;position:relative;">
                    <div class="inputHint" ng-show="chapter.title == ''">章节标题(可不填)</div>
                    <input ng-model="chapter.title">
                </div>

                <div id="icon-bar">
                    <div class="icon-background"  selected="fanficEdit" pointer="0"><svg class="icon"><use xlink:href="#icon-book"></use></svg></div>
                    <div class="icon-background"  selected="fanficEdit" pointer="1"><svg class="icon" style="width:25px;height:25px;"><use xlink:href="#icon-users"></use></svg></div>
                    <div class="icon-background"  selected="fanficEdit" pointer="2"><svg class="icon" style="width:20px;height:20px;"><use xlink:href="#icon-user"></use></svg></div>
                    <div class="icon-background"  selected="fanficEdit" pointer="3"><svg class="icon"><use xlink:href="#icon-priority_high"></use></svg></div>
                    <div class="icon-background"  selected="fanficEdit" pointer="4"><svg class="icon"><use xlink:href="#icon-menu_book"></use></svg></div>
                    <div class="icon-background" selected="fanficEdit" pointer="5"><svg class="icon"><use xlink:href="#icon-hangouts"></use></svg></div>
                    <div class="icon-background" selected="fanficEdit" pointer="6"><svg class="icon"><use xlink:href="#icon-more"></use></svg></div>
                </div>

                <tag-collector hint="基于作品(如不填则显示为原创)" list="chapter.fandom" ng-show="valueAtBit(fanficEdit,6)"></tag-collector>

                <tag-collector hint="人物关系(输入标签，用,或回车结束，可不填)" list="chapter.relationships" ng-show="valueAtBit(fanficEdit,5)"></tag-collector>

                <tag-collector hint="登场人物（输入标签，用,或回车结束，可以不填)" list="chapter.characters" ng-show="valueAtBit(fanficEdit,4)"></tag-collector>

                <div id="warningPanel" class="myInput" ng-show="valueAtBit(fanficEdit,3)" style="display:flex;flex-direction:column;">
                    <div>
                        <div style="text-align:center;line-height:1.8rem;padding:5px;"><i class="fa fa-caret-down" style="font-size:1.5rem;"></i></div>
                        <select button-style-a style="flex:1;padding-left:2.5rem;background:rgba(0,0,0,0);border:none;"  ng-init="currentWarningSelect=warningTemplate[0].refer;" ng-model="currentWarningSelect">
                            <option ng-repeat="item in warningTemplate">{{item.refer}}</option>
                        </select>
                        <button style="margin-right:auto;padding-left:15px;padding-right:15px;" ng-click="addWarningTemplate()" button-style-a>添加</button>
                    </div>
                    <div id="warningScroll">
                        <div ng-show="chapter.warning.length > 0" style="margin-left:auto;margin-right:auto;font-size:14px;width:80%;max-width:80%;text-align:center;">
                            <ul style="margin-top:1rem;margin-bottom:1rem;">
                                <li ng-repeat="list in chapter.warning" button-style-b ng-click="removeWarning(list)">{{list}}</li>
                            </ul>
                        </div>
                        <div ng-show="chapter.warning.length==0" style="color:rgba(181,163,160,128);padding:0;font-size:14px;margin-right:auto;margin-left:auto;margin-top:1rem;margin-bottom:1rem;width:60%;text-align:left;">
                            您所添加的所有警告都会在这里出现，如：<br>
                            <ul style="margin-left:2rem;">
                                <li>毒品交易提及</li>
                                <li>有部分逆向CP内容</li>
                            </ul>
                        </div>
                    </div>

                    <div class="displayRow tagInput" style="min-height:2rem;">
                        <div style="width:35px;"><svg class="icon" style="width:20px;height:20px;margin-top:5px;" ><use xlink:href="#icon-pencil"></use></svg></div>
                        <div class="inputHint" ng-show="warningInput=='' " style="margin-left:35px;">您也可以在这里添加您自己的警告,回车输入(最多20字)</div>
                        <input ng-model="warningInput" maxlength="30" ng-keyup="submitWarning($event)">
                    </div>
                </div>

                <div class="myInput displayRow tagInput" ng-show="valueAtBit(fanficEdit,2)" style="min-height:6rem;">
                    <div class="inputHint" ng-show="chapter.intro==''" style="margin-left:5px;margin-right:5px;top:8px;">您可以为您的章节写一个简短的介绍，如果不填写将默认显示您文章内容的节选；(可以不填)</div>
                    <textarea style="resize:none;background:rgba(0,0,0,0);border:none;height:calc(100% - 10px);width:100%;padding-left:15px;padding-right:15px;padding-top:10px;margin-top:0;" ng-model="chapter.intro" maxlength="200"></textarea>
                </div>

                <div class="myInput displayRow tagInput" ng-show="valueAtBit(fanficEdit,1)" style="min-height:5rem;">
                    <div class="inputHint" ng-show="chapter.notes==''" style="margin-left:5px;margin-right:5px;top:8px;">如果有任何您想写在文章前面，让您的读者知道的话，您可以写在这里;（可以不填)</div>
                    <textarea style="resize:none;background:rgba(0,0,0,0);border:none;height:calc(100% - 10px);width:100%;padding-left:15px;padding-right:15px;padding-top:10px;margin-top:0;" ng-model="chapter.notes"></textarea>
                </div>

                <tag-collector hint="您可以用其他关键字让自己的文章被搜索(可以不填)。" list="chapter.tag" ng-show="valueAtBit(fanficEdit,0)"></tag-collector>

                <div id="tool-bar">
                    <div class="tool-section">
                        <div class="" ng-click="richText('b')"><svg class="icon" style="width:20px;" ><use xlink:href="#icon-bold"></use></svg></div>
                        <div class="" ng-click="richText('i')"><svg class="icon" style="width:20px;"><use xlink:href="#icon-italic"></use></svg></div>
                        <div class="" ng-click="richText('u')"><svg class="icon" style="width:20px;" ><use xlink:href="#icon-underline"></use></svg></div>
                        <div class="" ng-click="richText('s')"><svg class="icon" style="width:20px;" ><use xlink:href="#icon-strikethrough"></use></svg></div>
                    </div>
                    <div class="vLinear"></div>
                    <div class="tool-section">
                        <div><svg class="icon" style="margin-left:-8px;" ng-click="richText('link')"><use xlink:href="#icon-link"></use></svg></div>
                        <div><svg class="icon" style="margin-left:-8px;"><use xlink:href="#icon-image" ng-click="richText('img')"></use></svg></div>
                    </div>
                    <div class="vLinear"></div>
                    <div class="tool-section">
                        <div ng-click="richText('ol')"><svg class="icon" style="margin-left:-9px;"><use xlink:href="#icon-list-numbered"></use></svg></div>
                        <div ng-click="richText('ul')"><svg class="icon" style="margin-left:-9px;"><use xlink:href="#icon-list2"></use></svg></div>
                    </div>
                </div>

                <div class="myInput" style="width:100%;min-height:25rem;max-height:26rem;display:flex;overflow:auto;">
                    <div contenteditable="true" id="editBox" edit-box ng-model="chapter.contents"></div>
                </div>

                <div class="displayRow" style="font-size:14px;flex:1;width:100%;padding-top:0.8rem;border-left:solid 1px rgba(218,218,218,218);border-right:solid 1px rgba(218,218,218,218);flex-wrap:wrap;padding-bottom:30px;min-height:4rem;max-height:4rem;">
                    <div style="margin-left:5px;width:6rem;display:flex;flex-direction:row;">
                        <div style="width:15px;margin-left:5px;"><input type="checkbox" style="zoom:100%;" ng-model="chapter.passcode.use"></div>
                        <div style="margin-left:15px;margin-top:auto;margin-bottom:auto;line-height:2rem;">使用口令</div>
                    </div>
                    <input ng-disabled="!chapter.passcode.use" ng-model="chapter.passcode.code" style="margin-left:15px;margin-right:15px;height:1.2rem;margin-top:auto;margin-bottom:auto;padding-left:10px;">
                    <div style="width:100%;font-size:14px;"><div style="width:70%;margin-left:auto;margin-right:auto;text-align:center;">注意，一旦选择使用口令，不管选择何种加密方式，您的读者都必须输入口令才能阅读全文</div></div>
                </div>

                <div  class="displayRow myInput" style="padding-bottom:2rem;font-size:14px;border-bottom:none;font-weight:bold;" float-parent  value="chapter.lockType">
                    <div float-page style="z-index:99;color:rgba(108,95,93,255);width:8rem;bottom:3.7rem;left:2rem;">
                        <div float-select value="0">全网可见</div>
                        <div float-select value="1">仅站内可见</div>
                        <div float-select value="2">仅自己可见</div>
                    </div>
                    <div class="subIcon displayRow" style="margin-left:30px;" float-select-button currentoption="{{chapter.lockType | lockType}}" currentvalue="{{chapter.lockType}}">
                        <div style="height:100%;line-height:100%;"><i class="fa fa-caret-up" style="font-size:1.5rem;padding-right:3px;"></i></div>
                        <div class="optionName" style="font-size:0.9rem;line-height:1.5rem;">全网可见</div>
                    </div>
                </div>

                <div class="displayRow myInput" style="font-size:16px;height:2rem;max-height:2em;" >
                    <div class="button button1" style="margin-right:auto;margin-left:20px;">丢 弃</div>
                    <div class="button button1" style="margin-left:auto;margin-right:20px;" ng-click="preview()">预 览</div>
                    <div style="margin-right:20px;display:flex;flex-direction:row;" float-parent value="submitType">
                        <div class="button button2 optionName" style="color:white;" ng-click="submit()"></div>
                        <div class="button button2" float-select-button currentoption="发 布" currentvalue="0" style="margin-left:1px;padding-left:0;padding-right:3px;border-radius:4px;width:20px;fill:white;">
                            <div style="color:white;margin:auto;"><i class="fa fa-caret-down" style="font-size:1.5rem;padding-left:3px;"></i></div>
                        </div>
                        <div float-page style="z-index:99;width:10rem;top:2.5rem;right:-2rem;font-size:14px;">
                            <div float-select value="0" text="发 布">仅发布当前章节</div>
                            <div float-select value="1" text="保存草稿" ng-show=" chapter && !chapter.published">保存当前创作内容</div>
                            <div float-select value="2" text="全部发布">发布全部章节</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
