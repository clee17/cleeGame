<style>
    #boardPanel {
        display:flex;
        flex-direction:column;
        margin-left:auto;
        margin-right:auto;
        flex:1;
        width:100%;
    }

    #contents_list {
    }

    #reply_board{
        position:absolute;
        left:0;
        top:0;
        width:100vw;
        height:100vh;
        z-index:99;
        display:none;
        overflow:hidden;
        padding-left:2rem;
        padding-right:2rem;
        background:rgba(65,65,65,0.8);
        transition:opacity 0.15s ease-out;
    }

    #contents_list{
        margin-left:auto;
        margin-right:auto;
        font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        width:100%;
        border-collapse:collapse;
    }

    #contents_list tr{
        border-bottom:solid 1px rgba(182,161,147,1);
    }

    #contents_list td{
        padding-bottom:5px;
        padding-top:5px;
        color:rgba(108,95,93,1);
    }

    #contents_list tr>td:nth-child(1){
        min-width:3rem;
        color:rgba(182,161,147,1);
    }

    #contents_list tr>td:nth-child(2){
        padding-right:2rem;
    }

    #contents_list tr>td:nth-child(3){
        color:rgba(139,100,127,1);
        font-weight:bold;
    }

    #contents_list tr>td:nth-child(5){
        display:flex;
        flex-direction:column;
        width:4rem;
        font-size:0.8rem;
    }

    #contents_list tr>td:nth-child(5) a{
        color:rgba(139,100,127,1);
        font-weight:bold;
    }

    #contents_list a{
        color:inherit;
        font-weight:inherit;
    }

    #contents_list a:hover{
        text-decoration:underline;
    }

    #editorPanel{
        display:flex;
        flex-direction:column;
        width:100%;
        height:100%;
        background:white;

    }

    #thread_grade{
        display:flex;
        flex-direction:row;
        margin-top:2rem;
        margin-left:2rem;
        margin-right:2rem;
    }

    #thread_grade >select{
        height:1.5rem;
        border:solid 1px rgba(185,185,185,0.8);
        color:inherit;
        border-radius:3px;
        background:white;
        transition:background 0.25s;
    }

    #thread_grade >select:hover{
        background:rgba(238,238,238,1);
    }

    #thread_grade >select:disabled{
        background:rgba(185,185,185,0.8);
    }

    #mce_title{
        margin:2rem;
        height:2rem;
        margin-bottom:0;
        margin-top:0.5rem;
        border:solid 1px rgba(205,205,205,0.8);
        border-bottom:none;
    }


    #mce_title >input{
        width:100%;
        height:100%;
        border:none;
        background:none;
        color:rgba(108,95,93,1);
        font-weight:bold;
        font-size:1rem;
        padding-left:8px;
        font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    #mce_title >input:disabled{
        background:rgba(185,185,185,1);
    }

    #mce_title >input:focus{
        border:none;
    }

    #mce_title >input::-webkit-input-placeholder { /* WebKit browsers */
        color:rgba(181,163,160,1);

    }
    #mce_title >input:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
        color:rgba(181,163,160,1);

    }
    #mce_title >input::-moz-placeholder { /* Mozilla Firefox 19+ */
        color:rgba(181,163,160,1);

    }
    #mce_title >input:-ms-input-placeholder { /* Internet Explorer 10+ */
        color:rgba(181,163,160,1);

    }

    #tinyMceEditor{
        margin:2rem;
        margin-top:-1px;
        flex:1;
        position:relative;
    }

    @media screen and (min-device-width:80rem){
        #reply_board{
        }

        #thread_grade{
            margin-left:5rem;
            margin-right:5rem;
            margin-top:3.5rem;
        }

        #contents_list{
            width:60rem;
        }

        #contents_list tr>td{
            padding-right:0.5rem;
            padding-left:0.5rem;
        }


        #contents_list tr>td:nth-child(3){
            width:5rem;
        }

        #editorPanel{
            margin:auto;
            width:70%;
            height:calc(100% - 5rem);
            min-width:25rem;
            min-height:15rem;
            border-radius:5px;
        }

        #mce_title{
            margin-left:5rem;
            margin-right:5rem;
        }

        #tinyMceEditor{
            margin-left:5rem;
            margin-right:5rem;
        }
    }

</style>

<div id="boardPanel" ng-controller="board_con">
    <info-receiver
            ng-init="board_id = '<%- _id %>';
            board_setting =  '<%- setting %>';
            board_description='<%- description %>';
            board_title = '<%- title %>';
            board_category = '<%- escape(JSON.stringify(category)) %>';
            board_count = '<%- threads %>';
            message_threadlen = '<%- escape(websiteInfo[110]) %>';
            message_title = '<%- escape(errAll[24]) %>';
            message_no_title  = '<%- escape(errAll[25]) %>';
            message_nonew_user = '<%- escape(errInfo[25]) %>';
            message_nonew_visitor = '<%- escape(errInfo[27]) %>';
             message_blocked_user = '<%- escape(errInfo[37]) %>';
             message_block_date = '<%- escape(errInfo[38]) %>';
             message_non_registered = '<%- escape(errInfo[39]) %>';
            alert_delete_thread = '<%- escape(websiteInfo[130]) %>';
            totalNum = '<%- threads %>';
            allow_reply = '<%- allowReply %>';">
    </info-receiver>
    <div style="margin:auto;" ng-show="requesting"><i class="fa fa-spinner fa-spin fa-3x"></i></div>
    <div ng-show="threads.length === 0 && !requesting" style="margin:auto;"><%- websiteInfo[106] %></div>
    <div style="flex:1;"><table id="contents_list" ng-show="threads.length >0 && !requesting">
        <tr ng-repeat="thread in threads">
            <td>[{{thread.category | category:$parent.board_category}}]</td>
            <td><a href="{{getBoardLink(thread)+'/thread/'+thread._id}}">{{thread.title}}</a></td>
            <td style="font-size:0.85rem;">
                <a href="{{'/users/'+ thread.author._id}}" target="_blank">{{thread.author | username}}</a>
            </td>
            <td style="width:8.5rem;font-size:0.85rem;">
                {{thread.createdAt | dateInfo}}
            </td>
            <td>
                <span><a href="{{getBoardLink(thread)+'/thread/'+thread._id}}">{{thread.replied - thread.deleted}}</a></span>
                <span>{{thread.visited}}</span>
            </td>
            <td style="width:4rem;font-size:0.8rem;">
                {{thread.repliedAt ? (thread.repliedAt | dateInfo) : '<%- infoAll[16] %>'; }}
            </td>
            <% if((user && user._id === owner) || (user && user.isAdmin) ) { %>
            <td>
                <button class="linkBtn" style="font-weight:bold;" ng-click="deleteThread(thread)"><%- websiteInfo[45] %></button>
            </td>
            <% } %>
        </tr>
    </table>
    </div>
    <page-index pid='pageIndex' tnm="totalNum" ppg="perPage" style="margin-top:auto;"></page-index>

    <% if((user && user._id === owner) || allowNew ) { %>
    <div style="display:flex;flex-direction:row;margin-bottom:2.5rem;margin-left:auto;margin-right:auto;width:63rem;">
        <button class="grand-button" style="margin-left:auto;margin-right:0;padding-top:0.5rem;" ng-click="newThread()"><%- websiteInfo[107] %></button>
    </div>

    <% } %>
    <div id="reply_board" >
        <div id="editorPanel">
            <div id="thread_grade" ng-disalbed="requesting">
                <select  ng-options="cat.name | trim for cat in board_category"
                         ng-model="newThread_category"
                         ng-disabled="requesting || blocked || !editorActive"
                         style="margin-left:1rem;margin-right:auto;width:4rem;">
                </select>

                <select ng-model="newThread_grade"
                        ng-disabled="requesting || blocked || !editorActive"
                        style="margin-left:auto;margin-right:1rem;">
                    <option value="0"><%- infoAll[13] %></option>
                    <option value="1"><%- infoAll[14] %></option>
                    <option value="2"><%- infoAll[15] %></option>
                </select></div>
            <div id="mce_title" >
                <input placeholder="<%- websiteInfo[108] %>"
                       maxlength="30"
                       ng-disabled="requesting || blocked || !editorActive"
                       ng-model="newThread_title"></div>
            <div ng-controller="TinyMceController" id="tinyMceEditor"   ng-init="editor_id = 'thread_editor';">
                <textarea ui-tinymce="tinymceOptions" ng-model="tinymceModel">Tiny MCE</textarea>
                <textarea class="tinymce_codeEditor" id="tinymce_codeEditor"
                          style="position:absolute;left:0;top:40px;z-index:85;
                          background:rgba(0,0,0,0);
                          border:none;
                          resize:none;
                          display:none;
                          width:calc(100% - 40px);
                          height:calc(100% - 60px);"></textarea>
            </div>
            <div style="display:flex;margin-bottom:3rem;">
                <button class="grand-button" style="margin-left:auto;margin-right:0.5rem;height:2rem;padding:0;line-height:2rem;padding-left:1rem;padding-right:1rem;"
                        ng-disabled="requesting || blocked || !editorActive"
                        ng-click="publish()"><%- websiteInfo[109] %></button>
                <button class="ghost-button white_ghost"
                        style="margin-left:0.5rem;margin-right:4rem;height:2rem;line-height:2rem;padding-left:1rem;padding-right:1rem;"
                        ng-disabled="requesting"
                        ng-click="cancelNewthread()"><%- websiteInfo[1] %></button>
            </div>
        </div>
    </div>
</div>