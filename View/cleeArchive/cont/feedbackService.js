app.service("feedbackManager",["$http","$rootScope",function(e,t){this.likeIt=function(s){e.post("/fanfic/post/like",{data:LZString.compressToBase64(JSON.stringify(s))}).then(function(e){let o=JSON.parse(LZString.decompressFromBase64(e.data));o.work=s.work,t.$broadcast("likeFinished",o)},function(e){let o={message:"网络通信错误，请刷新页面尝试",success:!1};o.work=s.work,t.$broadcast("likeFinished",o)})},this.bookMarkIt=function(s){e.post("/fanfic/post/bookmark",{data:LZString.compressToBase64(JSON.stringify(s))}).then(function(e){let o=JSON.parse(LZString.decompressFromBase64(e.data));o.work=s.work,t.$broadcast("bookmarkFinished",o)},function(e){let o={message:"网络通信错误，请刷新页面尝试",success:!1};o.work=s.work,t.$broadcast("bookmarkFinished",o)})},this.postComment=function(s){e.post("/fanfic/post/comment",{data:LZString.compressToBase64(JSON.stringify(s))}).then(function(e){let o=JSON.parse(LZString.decompressFromBase64(e.data));o.work=s.workId,o.chapter=s.chapterId,o.infoType=s.infoType,t.$broadcast("commentFinished",o)},function(e){let o={message:"网络通信错误，请刷新页面尝试",success:!1};o.work=s.workId,o.chapter=s.chapterId,o.infoType=s.infoType,t.$broadcast("commentFinished",o)})},this.deleteComment=function(s){e.post("/fanfic/post/deleteComment",{data:LZString.compressToBase64(JSON.stringify(s))}).then(function(e){let o=JSON.parse(LZString.decompressFromBase64(e.data));o.work=s.work,o.chapter=s.chapter,o.infoType=s.infoType,t.$broadcast("deleteCommentFinished",o)},function(e){let o={message:"网络通信错误，请刷新页面尝试",success:!1};o.work=s.work,o.chapter=s.chapter,o.infoType=s.infoType,t.$broadcast("deleteCommentFinished",o)})},this.requestFeedback=function(s){e.post("/feedback/request",{data:LZString.compressToBase64(JSON.stringify(s))}).then(function(e){o.work=s.work,o.chapter=s.chapter;let o=JSON.parse(LZString.decompressFromBase64(e.data));t.$broadcast("feedbackRequestFinished",o)},function(e){let o={message:"网络通信错误，请刷新页面尝试",success:!1};o.work=s.work,o.chapter=s.chapter,t.$broadcast("feedbackRequestFinished",o)})}}]);