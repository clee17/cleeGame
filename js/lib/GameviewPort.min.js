function Graphics(){throw new Error("This is a static class")}Graphics._cssFontLoading=document.fonts&&document.fonts.ready,Graphics._fontLoaded=null,Graphics._videoVolume=1,Graphics.initialize=function(e,t,i){this._initialized||(this._width=e||1280,this._height=t||720,this._rendererType=i||"auto",this._scale=1,this._realScale=1,this._errorShowed=!1,this._errorPrinter=null,this._canvas=null,this._video=null,this._videoUnlocked=!1,this._videoLoading=!1,this._upperCanvas=null,this._renderer=null,this._fpsMeter=null,this._skipCount=0,this._maxSkip=3,this._rendered=!1,this._loadingImage=null,this._loading=!1,this._loadingCount=0,this._fpsMeterToggled=!1,this._stretchEnabled=!0,this._canUseDifferenceBlend=!1,this._canUseSaturationBlend=!1,this._hiddenCanvas=null,this._initialized=!0,this._titleLoading=!1,this._booted=!1,this._title=null,this._fadeSign=0,this._fadeDuration=0,this._reference=null,this._titleResource=[],this._errorUrl="data:image/png;base64,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",this.setLoadingImage(),this.preLoadTitle(),this._testCanvasBlendModes(),this._modifyExistingElements(),this._updateRealScale(),this._createAllElements(),this._disableTextSelection(),this._disableContextMenu(),this._setupEventHandlers(),this.startLoading(),this.requestUpdate())},Graphics.boot=function(){this._booted=!0,this._createFPSMeter(),makeVideoPlayableInline(this._video)},Graphics.tickStart=function(){this._fpsMeter&&this._fpsMeter.tickStart()},Graphics.tickEnd=function(){this._fpsMeter&&this._rendered&&this._fpsMeter.tick()},Graphics.frameCount=0,Graphics.BLEND_NORMAL=0,Graphics.BLEND_ADD=1,Graphics.BLEND_MULTIPLY=2,Graphics.BLEND_SCREEN=3,Graphics.render=function(e){if(0===this._skipCount){var t=Date.now();e&&(this._renderer.render(e),this._renderer.gl&&this._renderer.gl.flush&&this._renderer.gl.flush());var i=Date.now()-t;this._skipCount=Math.min(Math.floor(i/15),this._maxSkip),this._rendered=!0}else this._skipCount--,this._rendered=!1;this.frameCount++},Graphics.isWebGL=function(){return this._renderer&&this._renderer.type===PIXI.RENDERER_TYPE.WEBGL},Graphics.hasWebGL=function(){try{var e=document.createElement("canvas");return!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},Graphics.canUseDifferenceBlend=function(){return this._canUseDifferenceBlend},Graphics.canUseSaturationBlend=function(){return this._canUseSaturationBlend},Graphics.setLoadingImage=function(e){let t=e||"/img/Loading.png";this._loadingImage=new Image,this._loadingImage.src=t},Graphics.mergeChunk=function(e){if(0==e.length)return null;let t=0,i=[];for(let n=0;n<e.length;++n)t+=e[n].byteLength,i.push(new Uint8Array(e[n]));let n=new ArrayBuffer(t),s=new Uint8Array(n),r=0;for(let e=0;e<i.length;++e)for(let t=0;t<i[e].length;++t,r++)s[r]=i[e][t];return n},Graphics.preLoadTitle=function(){let e=path+"/img/title",t=[null,null,null];for(let i=0;i<3;++i){let n=e+"?id="+i,s=new XMLHttpRequest;s.open("GET",n),s.responseType="arraybuffer",s.sign=i,s.send(),s.onload=function(){if(s.response&&(t[i]=s.response,-1==t.indexOf(null))){Graphics._reference=Graphics.mergeChunk(t);let i=new Blob([Graphics._reference]);var e=new FileReader;e.addEventListener("loadend",function(){Graphics._reference=JSON.parse(e.result),Graphics._reference&&Graphics.loadResource()}),e.readAsBinaryString(i)}},s.onerror=function(e){console.log(e)}}},Graphics.loadResource=function(){if(!this._reference||this._titleResource.length>0)return;let e=this._reference.maxFiles;this._titleResource.length=e,this._titleResource.fill(null,0);for(let t=0;t<e;++t){let e=path+"/img/title/request"+"?id="+t,i=new XMLHttpRequest;i.open("GET",e),i.responseType="arraybuffer",i.sign=t,i.send(),i.onload=function(){Graphics._titleResource[this.sign]=i.response,-1===Graphics._titleResource.indexOf(null)&&Graphics.loadAllTitleImage()}}},Graphics.getTitleImage=function(e){return e+=".png",this._reference.index[e].img?this._reference.index[e].img:this._errorUrl},Graphics.resolveTitleImg=function(e){if(!this._reference.index[e])return this._errorUrl;let t=this._reference.index[e],i=new ArrayBuffer(t.fileSize),n=new Uint8Array(i),s=t.fileId,r=Math.ceil((t.startIndex+t.fileSize)/1e5)+s,a=[];for(let e=s;e<r;++e)a.push(new Uint8Array(this._titleResource[e]));let h=t.startIndex;for(let e=0;e<t.fileSize;++e,++h){let t=parseInt(h/1e5),i=h%1e5;n[e]=a[t][i]}return i},Graphics.loadAllTitleImage=function(){for(let e in this._reference.index){let t=Graphics.resolveTitleImg(e),i=new FileReader;i.onload=function(){i.result&&(Graphics._reference.index[e].img=i.result)};let n=new Blob([t]);i.readAsDataURL(n)}},Graphics.startLoading=function(){this._loading||(this._loadingCount=0,this._loading=!0)},Graphics.updateLoading=function(){this._loading&&(this._loadingCount++,this._paintUpperCanvas(),this._upperCanvas.style.opacity=1)},Graphics.endLoading=function(){this._loading=!1,this._clearUpperCanvas(),this._upperCanvas.style.opacity=0},Graphics.endLoadingAndFade=function(){this._loading&&(this._loading=!1,this._clearUpperCanvas(),this._fadeSign=1,this._fadeDuration=30,this._upperCanvas.style.opacity=1)},Graphics.printLoadingError=function(e){if(this._errorPrinter&&!this._errorShowed){this._errorPrinter.innerHTML=this._makeErrorHtml("Loading Error","Failed to load: "+e);var t=document.createElement("button");t.innerHTML="Retry",t.style.fontSize="24px",t.style.color="#ffffff",t.style.backgroundColor="#000000",t.onmousedown=t.ontouchstart=function(e){ResourceHandler.retry(),e.stopPropagation()},this._errorPrinter.appendChild(t),this._loadingCount=-1/0}},Graphics.eraseLoadingError=function(){this._errorPrinter&&!this._errorShowed&&(this._errorPrinter.innerHTML="",this.startLoading())},Graphics.printError=function(e,t){this._errorShowed=!0,this._errorPrinter&&(this._errorPrinter.innerHTML=this._makeErrorHtml(e,t)),this._applyCanvasFilter(),this._clearUpperCanvas()},Graphics.showFps=function(){this._fpsMeter&&this._fpsMeter.show()},Graphics.hideFps=function(){this._fpsMeter&&this._fpsMeter.hide()},Graphics.loadFont=function(e,t){var i=document.createElement("style"),n=document.getElementsByTagName("head"),s='@font-face { font-family: "'+e+'"; src: url("'+t+'"); }';i.type="text/css",n.item(0).appendChild(i),i.sheet.insertRule(s,0),this._createFontLoader(e)},Graphics.isFontLoaded=function(e){if(Graphics._cssFontLoading)return!!Graphics._fontLoaded&&Graphics._fontLoaded.check('10px "'+e+'"');this._hiddenCanvas||(this._hiddenCanvas=document.createElement("canvas"));var t,i=this._hiddenCanvas.getContext("2d"),n="abcdefghijklmnopqrstuvwxyz";return i.font="40px "+e+", sans-serif",t=i.measureText(n).width,i.font="40px sans-serif",t!==i.measureText(n).width},Graphics.playVideo=function(e){this._videoLoader=ResourceHandler.createLoader(null,this._playVideo.bind(this,e),this._onVideoError.bind(this)),this._playVideo(e)},Graphics._playVideo=function(e){this._video.src=e,this._video.onloadeddata=this._onVideoLoad.bind(this),this._video.onerror=this._videoLoader,this._video.onended=this._onVideoEnd.bind(this),this._video.load(),this._videoLoading=!0},Graphics.isVideoPlaying=function(){return this._videoLoading||this._isVideoVisible()},Graphics.canPlayVideoType=function(e){return this._video&&this._video.canPlayType(e)},Graphics.setVideoVolume=function(e){this._videoVolume=e,this._video&&(this._video.volume=this._videoVolume)},Graphics.pageToCanvasX=function(e){if(this._canvas){var t=this._canvas.offsetLeft;return Math.round((e-t)/this._realScale)}return 0},Graphics.pageToCanvasY=function(e){if(this._canvas){var t=this._canvas.offsetTop;return Math.round((e-t)/this._realScale)}return 0},Graphics.isInsideCanvas=function(e,t){return e>=0&&e<this._width&&t>=0&&t<this._height},Graphics.callGC=function(){Graphics.isWebGL()&&Graphics._renderer.textureGC.run()},Object.defineProperty(Graphics,"width",{get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._updateAllElements())},configurable:!0}),Object.defineProperty(Graphics,"height",{get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this._updateAllElements())},configurable:!0}),Object.defineProperty(Graphics,"boxWidth",{get:function(){return this._boxWidth},set:function(e){this._boxWidth=e},configurable:!0}),Object.defineProperty(Graphics,"boxHeight",{get:function(){return this._boxHeight},set:function(e){this._boxHeight=e},configurable:!0}),Object.defineProperty(Graphics,"scale",{get:function(){return this._scale},set:function(e){this._scale!==e&&(this._scale=e,this._updateAllElements())},configurable:!0}),Graphics._createAllElements=function(){this._createErrorPrinter(),this._createCanvas(),this._createVideo(),this._createUpperCanvas()},Graphics._updateAllElements=function(){this._updateRealScale(),this._updateErrorPrinter(),this._updateCanvas(),this._updateVideo(),this._updateUpperCanvas(),this._updateRenderer(),this._paintUpperCanvas()},Graphics._updateRealScale=function(){if(this._stretchEnabled){var e=window.innerWidth/this._width,t=window.innerHeight/this._height;e>=1&&e-.01<=1&&(e=1),t>=1&&t-.01<=1&&(t=1),this._isFullScreen()?this._realScale=Math.max(e,t):this._realScale=Math.min(e,t),this._isLargest()&&(this._realScale=Math.min(e,t))}else this._realScale=this._scale},Graphics.preferableRendererType=function(){return Utils.isOptionValid("canvas")?"canvas":Utils.isOptionValid("webgl")?"webgl":"auto"},Graphics._makeErrorHtml=function(e,t){return'<font color="yellow"><b>'+e+'</b></font><br><font color="white">'+t+"</font><br>"},Graphics._testCanvasBlendModes=function(){var e,t,i,n;(e=document.createElement("canvas")).width=1,e.height=1,(t=e.getContext("2d")).globalCompositeOperation="source-over",t.fillStyle="white",t.fillRect(0,0,1,1),t.globalCompositeOperation="difference",t.fillStyle="white",t.fillRect(0,0,1,1),i=t.getImageData(0,0,1,1),t.globalCompositeOperation="source-over",t.fillStyle="black",t.fillRect(0,0,1,1),t.globalCompositeOperation="saturation",t.fillStyle="white",t.fillRect(0,0,1,1),n=t.getImageData(0,0,1,1),this._canUseDifferenceBlend=0===i.data[0],this._canUseSaturationBlend=0===n.data[0]},Graphics._modifyExistingElements=function(){for(var e=document.getElementsByTagName("*"),t=0;t<e.length;t++)e[t].style.zIndex>0&&(e[t].style.zIndex=0)},Graphics._createErrorPrinter=function(){this._errorPrinter=document.createElement("p"),this._errorPrinter.id="ErrorPrinter",this._updateErrorPrinter(),document.body.appendChild(this._errorPrinter)},Graphics._updateErrorPrinter=function(){this._errorPrinter.width=.9*this._width,this._errorPrinter.height=40,this._errorPrinter.style.textAlign="center",this._errorPrinter.style.textShadow="1px 1px 3px #000",this._errorPrinter.style.fontSize="20px",this._errorPrinter.style.zIndex=99,this._centerElement(this._errorPrinter)},Graphics._createCanvas=function(){this._canvas=document.createElement("canvas"),this._canvas.id="GameCanvas",this._updateCanvas(),document.body.appendChild(this._canvas)},Graphics._updateCanvas=function(){this._canvas.width=this._width,this._canvas.height=this._height,this._canvas.style.zIndex=1,this._centerElement(this._canvas)},Graphics._createVideo=function(){this._video=document.createElement("video"),this._video.id="GameVideo",this._video.style.opacity=0,this._video.setAttribute("playsinline",""),this._video.volume=this._videoVolume,this._updateVideo(),document.body.appendChild(this._video)},Graphics._updateVideo=function(){this._video.width=this._width,this._video.height=this._height,this._video.style.zIndex=2,this._centerElement(this._video)},Graphics._createUpperCanvas=function(){this._upperCanvas=document.createElement("canvas"),this._upperCanvas.id="UpperCanvas",this._upperCanvas.style.background="black",this._updateUpperCanvas(),document.body.appendChild(this._upperCanvas)},Graphics._updateUpperCanvas=function(){this._upperCanvas.width=this._width,this._upperCanvas.height=this._height,this._upperCanvas.style.zIndex=3,this._centerElement(this._upperCanvas)},Graphics._clearUpperCanvas=function(){this._upperCanvas.getContext("2d").clearRect(0,0,this._width,this._height)},Graphics._paintUpperCanvas=function(){if(this._clearUpperCanvas(),this._loadingImage&&this._initialized&&this._loading){var e=this._upperCanvas.getContext("2d"),t=(this._width-this._loadingImage.width)/2,i=(this._height-this._loadingImage.height)/2,n=(this._loadingCount%40/30).clamp(0,1);e.save(),e.globalAlpha=n,e.drawImage(this._loadingImage,t,i),e.strokeStyle="white",e.lineWidth=2,e.globalAlpha=1,e.font="20px Arial",e.strokeText(loadingManager._loadingProgress.toString(),this._width-100,this._height-100),e.restore()}},Graphics._createRenderer=function(){PIXI.dontSayHello=!0;var e=this._width,t=this._height,i={view:this._canvas};try{switch(this._rendererType){case"canvas":this._renderer=new PIXI.CanvasRenderer(e,t,i);break;case"webgl":this._renderer=new PIXI.WebGLRenderer(e,t,i);break;default:this._renderer=PIXI.autoDetectRenderer(e,t,i)}this._renderer&&this._renderer.textureGC&&(this._renderer.textureGC.maxIdle=1)}catch(e){this._renderer=null}},Graphics._createFPSMeter=function(){this._fpsMeter=new FPSMeter({graph:1,decimals:0,theme:"transparent",toggleOn:null}),this._fpsMeter.hide()},Graphics._updateRenderer=function(){this._renderer&&this._renderer.resize(this._width,this._height)},Graphics._createFontLoader=function(e){var t=document.createElement("div"),i=document.createTextNode(".");t.style.fontFamily=e,t.style.fontSize="0px",t.style.color="transparent",t.style.position="absolute",t.style.margin="auto",t.style.top="0px",t.style.left="0px",t.style.width="1px",t.style.height="1px",t.appendChild(i),document.body.appendChild(t)},Graphics._centerElement=function(e){var t=e.width*this._realScale,i=e.height*this._realScale;e.style.position="absolute",e.style.margin="auto",e.style.width=t+"px",e.style.height=i+"px",e.style.top=window.innerHeight/2-i/2+"px",e.style.left=0,e.style.marginLeft=window.innerWidth/2-t/2+"px"},Graphics._disableTextSelection=function(){var e=document.body;e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.msUserSelect="none",e.style.mozUserSelect="none"},Graphics._disableContextMenu=function(){for(var e=document.body.getElementsByTagName("*"),t=function(){return!1},i=0;i<e.length;i++)e[i].oncontextmenu=t},Graphics._applyCanvasFilter=function(){this._canvas&&(this._canvas.style.opacity=.5,this._canvas.style.filter="blur(8px)",this._canvas.style.webkitFilter="blur(8px)")},Graphics._onVideoLoad=function(){this._video.play(),this._updateVisibility(!0),this._videoLoading=!1},Graphics._onVideoError=function(){this._updateVisibility(!1),this._videoLoading=!1},Graphics._onVideoEnd=function(){this._updateVisibility(!1)},Graphics._updateVisibility=function(e){this._video.style.opacity=e?1:0,this._canvas.style.opacity=e?0:1},Graphics._isVideoVisible=function(){return this._video.style.opacity>0},Graphics._setupEventHandlers=function(){window.addEventListener("resize",this._onWindowResize.bind(this)),document.addEventListener("keydown",this._onKeyDown.bind(this)),document.addEventListener("keydown",this._onTouchEnd.bind(this)),document.addEventListener("mousedown",this._onTouchEnd.bind(this)),document.addEventListener("touchend",this._onTouchEnd.bind(this))},Graphics._onWindowResize=function(){this._updateAllElements()},Graphics._onKeyDown=function(e){if(!e.ctrlKey&&!e.altKey)switch(e.keyCode){case 113:e.preventDefault(),this._switchFPSMeter();break;case 114:e.preventDefault(),this._switchStretchMode();break;case 122:e.preventDefault(),this._switchFullScreen()}},Graphics._onTouchEnd=function(e){this._videoUnlocked||(this._video.play(),this._videoUnlocked=!0),this._isVideoVisible()&&this._video.paused&&this._video.play()},Graphics._switchFPSMeter=function(){this._fpsMeter&&(this._fpsMeter.isPaused?(this.showFps(),this._fpsMeter.showFps(),this._fpsMeterToggled=!1):this._fpsMeterToggled?this.hideFps():(this._fpsMeter.showDuration(),this._fpsMeterToggled=!0))},Graphics._switchStretchMode=function(){this._stretchEnabled=!this._stretchEnabled,this._updateAllElements()},Graphics._switchFullScreen=function(){this._isFullScreen()?this._requestFullScreen():this._cancelFullScreen(),this._updateRealScale()},Graphics._isFullScreen=function(){return document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitFullscreenElement&&!document.msFullscreenElement},Graphics._isLargest=function(){let e=this._height*this._realScale*.1,t=this._width*this._realScale*.1;return screen.availWidth/screen.availHeight>=this._width/this.height?Math.abs(this._width*this._realScale-window.screen.availWidth)<=t&&this._height*this._realScale-window.outerHeight>=e:Math.abs(this._height*this._realScale-window.outerHeight)<=e&&this._width*this._realScale-window.screen.availWidth>=t},Graphics._requestFullScreen=function(){var e=document.body;e.requestFullScreen?e.requestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen()},Graphics._cancelFullScreen=function(){document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},Graphics.updateTitlePrep=function(){if(this._reference&&!this._titleLoading){for(let e in this._reference.index)if(!this._reference.index[e].img)return;this._titleLoading=!0}},Graphics.updateTitle=function(){this._titleLoading&&(!this._title&&Scene_Title?this._title=new Scene_Title:this._title&&this._title.isReady()&&(this.endLoadingAndFade(),this._upperCanvas.style.opacity<=.1&&!this._title.isStarted()&&this._title.startAnimation(),this._title.update(),this.render(this._title)))},Graphics.updateFade=function(){if(this._fadeDuration>0){var e=this._fadeDuration;if(this._fadeSign>0){let t=this._upperCanvas.style.opacity-this._upperCanvas.style.opacity/e;this._upperCanvas.style.opacity=t}else this._upperCanvas.style.opacity=this._upperCanvas.style.opacity+(1-this._upperCanvas.style.opacity)/e;this._fadeDuration--,this._fadeDuration<=0&&(this._fadeSign=0)}},Graphics._preLoading=function(){this.updateLoading(),this.updateFade(),this.updateTitlePrep(),this.updateTitle(),"undefined"==typeof PIXI||this._renderer||this._createRenderer(),this.requestUpdate()},Graphics.requestUpdate=function(){!this._booted&&this._initialized&&requestAnimationFrame(this._preLoading.bind(this))};