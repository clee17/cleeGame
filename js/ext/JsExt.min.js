function JsonEx(){throw new Error("This is a static class")}function Utils(){throw new Error("This is a static class")}Number.prototype.clamp=function(t,e){return Math.min(Math.max(this,t),e)},Number.prototype.mod=function(t){return(this%t+t)%t},String.prototype.format=function(){var t=arguments;return this.replace(/%([0-9]+)/g,function(e,r){return t[Number(r)-1]})},String.prototype.padZero=function(t){for(var e=this;e.length<t;)e="0"+e;return e},Number.prototype.padZero=function(t){return String(this).padZero(t)},Object.defineProperties(Array.prototype,{equals:{enumerable:!1,value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.length;e++)if(this[e]instanceof Array&&t[e]instanceof Array){if(!this[e].equals(t[e]))return!1}else if(this[e]!==t[e])return!1;return!0}},clone:{enumerable:!1,value:function(){return this.slice(0)}},contains:{enumerable:!1,value:function(t){return this.indexOf(t)>=0}}}),String.prototype.contains=function(t){return this.indexOf(t)>=0},Math.randomInt=function(t){return Math.floor(t*Math.random())},Number.prototype.clamp=function(t,e){return Math.min(Math.max(this,t),e)},Number.prototype.toCChar=function(){var t="";switch(this.valueOf()){case 0:t="零";break;case 1:t="一";break;case 2:t="二";break;case 3:t="三";break;case 4:t="四";break;case 5:t="五";break;case 6:t="六";break;case 7:t="七";break;case 8:t="八";break;case 9:t="九"}return t},Number.prototype.toCString=function(){var t="",e=["","十","百","千","万"],r=0,n=this.valueOf();if(0==n)return"零";for(;n>=1;)t=(n%10).toCChar()+e[r]+t,n=parseInt(n/10),++r;return"零"===t.slice(-1)&&(t=t.substring(0,t.substring.length)),t},Number.prototype.toCStringL=function(){var t="",e=this%1e4,r=this%1e7;r!=e&&(t=((r-e)/1e4).toCString()+"万");let n=t+e.toCString();return"零"===n.slice(-1)&&(n=n.substring(0,str.substring.length)),n},JsonEx.maxDepth=100,JsonEx._id=1,JsonEx._generateId=function(){return JsonEx._id++},JsonEx.stringify=function(t){var e=[];JsonEx._id=1;var r=JSON.stringify(this._encode(t,e,0));return this._cleanMetadata(t),this._restoreCircularReference(e),r},JsonEx._restoreCircularReference=function(t){t.forEach(function(t){var e=t[0],r=t[1],n=t[2];r[e]=n})},JsonEx.parse=function(t){var e=[],r={},n=this._decode(JSON.parse(t),e,r);return this._cleanMetadata(n),this._linkCircularReference(n,e,r),n},JsonEx._linkCircularReference=function(t,e,r){e.forEach(function(t){var e=t[0],n=t[1],i=t[2];n[e]=r[i]})},JsonEx._cleanMetadata=function(t){t&&(delete t["@"],delete t["@c"],"object"==typeof t&&Object.keys(t).forEach(function(e){var r=t[e];"object"==typeof r&&JsonEx._cleanMetadata(r)}))},JsonEx.makeDeepCopy=function(t){return this.parse(this.stringify(t))},JsonEx._encode=function(t,e,r){if(r=r||0,++r>=this.maxDepth)throw new Error("Object too deep");var n=Object.prototype.toString.call(t);if("[object Object]"===n||"[object Array]"===n){t["@c"]=JsonEx._generateId();var i=this._getConstructorName(t);for(var o in"Object"!==i&&"Array"!==i&&(t["@"]=i),t)t.hasOwnProperty(o)&&!o.match(/^@./)&&(t[o]&&"object"==typeof t[o]?t[o]["@c"]?(e.push([o,t,t[o]]),t[o]={"@r":t[o]["@c"]}):(t[o]=this._encode(t[o],e,r+1),t[o]instanceof Array&&(e.push([o,t,t[o]]),t[o]={"@c":t[o]["@c"],"@a":t[o]})):t[o]=this._encode(t[o],e,r+1))}return r--,t},JsonEx._decode=function(t,e,r){var n=Object.prototype.toString.call(t);if("[object Object]"===n||"[object Array]"===n){if(r[t["@c"]]=t,t["@"]){var i=window[t["@"]];i&&(t=this._resetPrototype(t,i.prototype))}for(var o in t)if(t.hasOwnProperty(o)){if(t[o]&&t[o]["@a"]){var a=t[o]["@a"];a["@c"]=t[o]["@c"],t[o]=a}t[o]&&t[o]["@r"]&&e.push([o,t,t[o]["@r"]]),t[o]=this._decode(t[o],e,r)}}return t},JsonEx._getConstructorName=function(t){var e=t.constructor.name;if(void 0===e){e=/^\s*function\s*([A-Za-z0-9_$]*)/.exec(t.constructor)[1]}return e},JsonEx._resetPrototype=function(t,e){if(void 0!==Object.setPrototypeOf)Object.setPrototypeOf(t,e);else if("__proto__"in t)t.__proto__=e;else{var r=Object.create(e);for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);t=r}return t},Utils.RPGMAKER_NAME="MV",Utils.RPGMAKER_VERSION="1.6.1",Utils.isOptionValid=function(t){return location.search.slice(1).split("&").contains(t)?1:"undefined"!=typeof nw&&nw.App.argv.length>0&&nw.App.argv[0].split("&").contains(t)?1:0},Utils.isNwjs=function(){return"function"==typeof require&&"object"==typeof process},Utils.isMobileDevice=function(){return!!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)},Utils.isMobileSafari=function(){var t=navigator.userAgent;return!(!t.match(/iPhone|iPad|iPod/)||!t.match(/AppleWebKit/)||t.match("CriOS"))},Utils.isAndroidChrome=function(){var t=navigator.userAgent;return!(!t.match(/Android/)||!t.match(/Chrome/))},Utils.canReadGameFiles=function(){var t=document.getElementsByTagName("script"),e=t[t.length-1],r=new XMLHttpRequest;try{return r.open("GET",e.src),r.overrideMimeType("text/javascript"),r.send(),!0}catch(t){return!1}},Utils.rgbToCssColor=function(t,e,r){return"rgb("+(t=Math.round(t))+","+(e=Math.round(e))+","+(r=Math.round(r))+")"},Utils._id=1,Utils.generateRuntimeId=function(){return Utils._id++},Utils._supportPassiveEvent=null,Utils.isSupportPassiveEvent=function(){if("boolean"==typeof Utils._supportPassiveEvent)return Utils._supportPassiveEvent;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("test",null,e),Utils._supportPassiveEvent=t,t};